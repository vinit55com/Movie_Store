!function i(s,a,c){function u(e,t){if(!a[e]){if(!s[e]){var r="function"==typeof require&&require;if(!t&&r)return r(e,!0);if(h)return h(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var n=a[e]={exports:{}};s[e][0].call(n.exports,function(t){return u(s[e][1][t]||t)},n,n.exports,i,s,a,c)}return a[e].exports}for(var h="function"==typeof require&&require,t=0;t<c.length;t++)u(c[t]);return u}({1:[function(t,e,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function o(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}}();function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}var i=function(){function e(){var s=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.load=function(e){var r=[],t=Array.from(e);return e.length=0,t.forEach(function(t,e){s.Registry&&s.Registry.getElement(t)||r.push(s.require(t))}),Promise.all(r).then(function(t){return e.length?s.load(e):t})},this.getPreparedName=function(t){return(t||"").toLowerCase().replace(/_/g,"-")},this.require=function(t){var e=s.getPreparedName(t),r=s.modules[e];if(r){if(r.endsWith(".js"))return s.requireScript(r);var o=s.rootPath+"modules/"+e+"/"+r+"/",n=o+"static/js/main.js",i=o+"static/css/main.css";return Promise.all([s.requireScript(n).then(function(t){return t?console.log("Module '"+e+"' loaded."):"",t}),s.requireStyle(i)])}return "",Promise.resolve(!0)},this.requireScript=function(o){return new Promise(function(t,e){if(document.querySelector('script[src="'+o+'"]'))t(!0);else{var r=document.createElement("script");r.setAttribute("src",o),r.onload=function(){t(!0)},r.onerror=function(){t(!1)},document.head.appendChild(r)}})},this.requireStyle=function(o){return new Promise(function(t,e){if(document.querySelector('link[href="'+o+'"]'))t(!0);else{var r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.setAttribute("href",o),r.onload=function(){t(!0)},r.onerror=function(){t(!1)},document.head.appendChild(r)}})},this.httpGet=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},this.httpGetAsync=function(o){return new Promise(function(t,e){var r=new XMLHttpRequest;r.onreadystatechange=function(){4==r.readyState&&200==r.status&&t(r.responseText)},r.open("GET",o,!0),r.send(null)})},this.registry=function(t,e,r){for(var o=arguments.length,n=Array(3<o?o-3:0),i=3;i<o;i++)n[i-3]=arguments[i];e&&r&&(t={class:t,name:e,version:r,dependencies:n}),s.Registry?(s.Registry.registry(t),(n=t.dependencies)&&n.forEach(function(t){s.toImport.push(t)})):s.toRegistry.push(t)},this.b64DecodeUnicode=function(t){return decodeURIComponent(atob(t).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))},this.b64EncodeUnicode=function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode("0x"+e)}))},this.setup=function(t,e,r){if(t)return s.Registry=t,s.store=r,s.toImport=e,s.toRegistry.forEach(function(t){s.registry(t)}),s.toRegistry=[],s.load(s.toImport).then(function(){return s.toImport.push(s.view),s.load(s.toImport).then(function(){return s.load(s.toPosload)})});var o=s.config.presetsUrl||s.rootPath+"presets";s.httpGetAsync(o).then(function(t){var e=t;try{e=s.b64DecodeUnicode(e)}catch(t){}return window.BR.apiPresets=JSON.parse(e),s.load(s.toPreload).then(function(){return s.require("intelli-components").then(function(){return s.require("intelli-core")})})})};var t=Object.assign({},window.BR,{api:this});Object.defineProperty(window,"BR",{_value:void 0,_loaded:!1,set:function(t){this._loaded||(this._loaded=!0,this._value=t)},get:function(){return this._value}}),window.BR=t}return o(e,[{key:"rootPath",get:function(){if(void 0===this._rootPath){var t=!(this._rootPath=""),e=!1,r=void 0;try{for(var o,n=document.querySelectorAll("script[src]")[Symbol.iterator]();!(t=(o=n.next()).done);t=!0){var i=o.value;if(i.src.endsWith("main.js")&&!i.src.endsWith("js/main.js")){this._rootPath=i.src.replace("main.js","");break}}}catch(t){e=!0,r=t}finally{try{!t&&n.return&&n.return()}finally{if(e)throw r}}}return this._rootPath}},{key:"toPreload",get:function(){return Object.assign([],this.preload)}},{key:"toPosload",get:function(){return Object.assign([],this.posload)}},{key:"toImport",get:function(){return this._toImport||(this._toImport=[]),this._toImport},set:function(t){t&&(this._toImport=t)}},{key:"toRegistry",get:function(){return this._toRegistry||(this._toRegistry=[]),this._toRegistry},set:function(t){t&&(this._toRegistry=t)}},{key:"store",get:function(){return this._store||(this._store={}),this._store},set:function(t){t&&(this._store=t)}},{key:"config",get:function(){return this._config||(this._config=window.BR.apiConfig||{}),this._config}},{key:"presets",get:function(){return this._presets||(this._presets=window.BR.apiPresets||{}),this._presets}},{key:"project",get:function(){if(!this._project){var t=this.presets.projects||{},e=this.config.project||Object.keys(t)[0];this._project=t[e]||{}}return this._project}},{key:"dashboard",get:function(){if(!this._dashboard){var t=this.project.dashboards||{},e=this.config.dashboard||Object.keys(t)[0];this._dashboard=t[e]||{}}return this._dashboard}},{key:"view",get:function(){return this._view||(this._view=this.dashboard.view||this.project.view||this.presets.view||""),this._view}},{key:"modules",get:function(){return this._modules||(this._modules=Object.assign({},this.presets.modules,this.project.modules,this.dashboard.modules)),this._modules}},{key:"preload",get:function(){if(!this._preload){var e=new Set;[].concat(this.dashboard.preload||[]).concat(this.project.preload||[]).concat(this.presets.preload||[]).forEach(function(t){e.add(t)}),this._preload=[].concat(n(e))}return this._preload}},{key:"posload",get:function(){if(!this._posload){var e=new Set;[].concat(this.dashboard.posload||[]).concat(this.project.posload||[]).concat(this.presets.posload||[]).forEach(function(t){e.add(t)}),this._posload=[].concat(n(e))}return this._posload}},{key:"hostApplication",get:function(){return this._hostApplication||(this._hostApplication=this.dashboard.hostApplication||this.project.hostApplication||this.presets.hostApplication||""),this._hostApplication}},{key:"dependencies",get:function(){var r=this;return new Proxy({},{get:function(t,e){if(r.Registry)return r.Registry.getElement(e)}})}}],[{key:"getInstance",value:function(){return window.BR&&window.BR.api||new e,window.BR.api}}]),e}();r.default=i},{}],2:[function(t,e,r){"use strict";var o,n=t("./Api");((o=n)&&o.__esModule?o:{default:o}).default.getInstance().setup()},{"./Api":1}]},{},[2]);
//# sourceMappingURL=main.js.map
